#テンダーミントとは

Tendermintは、安全で一貫性のある複製のための方法です
複数のマシンでのアプリケーション.セキュリティとは、テンダーミントが効果的であることを意味します
マシンの1/3でさえ、何らかの形で故障します.いつも、
つまり、障害が発生していないすべてのマシンに同じトランザクションログが表示され、
同じ状態を計算します.安全で一貫性のあるレプリケーションは
分散システムの基本的な問題;それは
通貨から、幅広いアプリケーションのフォールトトレランス
選挙、インフラストラクチャのスケジューリングなど.

を含むあらゆる方法で機械の故障に耐える能力
悪意を持って、ビザンチンフォールトトレランス(BFT)と呼ばれます.この
BFT理論には数十年の歴史がありますが、ソフトウェアの実装には
最近人気が出ているのは、主に「ブロックチェーン」の成功によるものです.
ビットコインやイーサリアムなどのテクノロジー」.ブロックチェーンテクノロジーは単なる
より近代的な環境でBFTを再調整し、
ピアツーピアネットワークと暗号化された認証.名前
トランザクションがブロックにバッチ処理される方法から派生します.
ブロックには前のブロックの暗号化ハッシュが含まれ、
鎖.実際には、ブロックチェーンのデータ構造は実際にBFTを最適化します
設計.

テンダーミントは、2つの主要な技術コンポーネントで構成されています:ブロックチェーン
コンセンサスエンジンと一般的なアプリケーションプログラムのインターフェイス.コンセンサス
Tendermint Coreと呼ばれるエンジンは、同じトランザクションを保証します
各マシンで同じ順序で録音します.アプリケーションインターフェイス、
アプリケーションブロックリンクインターフェイス(ABCI)と呼ばれ、
任意のプログラミング言語で処理されるトランザクション.他とは違う
ブロックチェーンおよびコンセンサスソリューション、事前にパッケージ化され、組み込まれています
ステートマシン(派手なKey-Valueストアや風変わりなスクリプトなど)
言語)、開発者はBFTステートマシンとしてTendermintを使用できます
任意のプログラミング言語で記述されたアプリケーションをコピーし、
開発環境は彼らに適しています.

テンダーミントは、使いやすく、理解しやすく、高度に設計されています
優れたパフォーマンスで、さまざまな分散アプリケーションに適しています.

##テンダーミントとX

Tendermintは、2種類のソフトウェアにほぼ似ています.まず、
このクラスは、Zookeeperなどの分散型Key-Valueストアで構成されています.
そして執政官、彼らは非BFTコンセンサスを使用します. 2番目のカテゴリは
「ブロックチェーンテクノロジー」は、次のような2つの暗号通貨で構成されています
ビットコインとイーサリアム、および代替の分散型台帳の設計(
Hyperledgerの洞窟.

### Zookeeperなど、領事

Zookeeperなどと領事はすべてKey-Valueストレージの実装です
従来の非BFTコンセンサスアルゴリズムに加えて. Zookeeperはバージョンを使用します
PaxosはZookeeperAtomic Broadcastと呼ばれ、etcdと領事は使用します
いかだコンセンサスアルゴリズム、それは若くて単純です.一
一般的なクラスターには3〜5台のマシンが含まれており、クラッシュに耐えることができます
最大1/2台のマシンで、ただし1つのビザンチン障害でも
システムを破壊します.

各製品はわずかに異なる実装を提供します
強力なKey-Valueストレージですが、通常は集中しています
動的などの分散システムに基本的なサービスを提供する
構成、サービスディスカバリ、ロック、リーダー選出など.

Tendermintは基本的に同様のソフトウェアですが、主に2つの違いがあります.

-ビザンチンフォールトトレラントです.つまり、せいぜいしか耐えられません.
  失敗の1/3ですが、これらの失敗には任意の動作が含まれる可能性があります-
  ハッカー攻撃と悪意のある攻撃を含みます.
-ファンシーキー値などの特定のアプリケーションを指定しません
  店.代わりに、任意の状態マシンレプリケーションに焦点を当てています.
  したがって、開発者は自分に合ったアプリケーションロジックを構築できます.
  Key-Valueストレージから暗号化された通貨、電子投票プラットフォームなどまで.

###ビットコイン、イーサリアムなど

テンダーミントはビットコインのような暗号通貨の伝統に登場します、
より効率的で安全なものを提供することを目的としたイーサリアムなど
コンセンサスアルゴリズムは、ビットコインのプルーフオブワークよりも優れています.初めの頃、
テンダーミントにはシンプルな通貨が組み込まれているので、参加できます
コンセンサス、ユーザーは通貨単位を証券に「バインド」する必要があります
彼らが不正行為をした場合、彼らは預金を引き出すことができます-これは
Tendermintは、プルーフオブステークアルゴリズムです.

それ以来、テンダーミントはユニバーサルブロックチェーンに発展しました
任意のアプリケーション状態をホストできるコンセンサスエンジン.これの意味は
コンセンサスエンジンのプラグアンドプレイの代替手段として使用できます
その他のブロックチェーンソフトウェア.したがって、現在のイーサリアムコードを使用できます
Rust、Go、Haskellのいずれであっても、基本はABCIとして実行します
Tendermintコンセンサスを使用するアプリケーション.実際、[
イーサリアム](https://github.com/cosmos/ethermint).やる予定です
ビットコイン、ZCashおよびその他のさまざまな決定論的
同じことがアプリケーションにも当てはまります.

Tendermintベースの暗号通貨アプリケーションの別の例は
[コスモスネットワーク](http://cosmos.network).

###その他のブロックチェーンプロジェクト

[ファブリック](https://github.com/hyperledger/fabric)も同様のアプローチを取りました
テンダーミントに、しかし状態を管理する方法についてのより多くの意見、
そして、すべてのアプリケーションの動作が多くの場合に発生する可能性があることを要求します
Dockerコンテナ、これは「チェーンコード」モジュールと呼ばれます.それは使用します
[PBFT](http://pmg.csail.mit.edu/papers/osdi99.pdf)の実装.
[潜在能力を処理するために強化されたIBMのチーム
わからない
チェーンコード)(https://www.zurich.ibm.com/~cca/papers/sieve.pdf)はい
このDockerベースの動作は、ABCIアプリケーションとして実装できます.
テンダーミント、ただしテンダーミントは非決定論を処理するように拡張されています
今後の作業のために保存してください.

[Burrow](https://github.com/hyperledger/burrow)は実装です
イーサリアム仮想マシンとイーサリアムトランザクションメカニズム、および
このマシンの名前登録、権限、および追加機能
コントラクト、および代替ブロックチェーンAPI.テンダーミントを使用しています
コンセンサスエンジンと特定のアプリケーションステータスを提供します.

## ABCIの概要

[アプリケーションブロックリンクポート
(ABCI)](https://github.com/tendermint/tendermint/tree/master/abci)
アプリケーションのビザンチンフォールトトレラントレプリケーションを可能にします
任意のプログラミング言語で書かれています.

### 動機

これまでのところ、すべてのブロックチェーンは「スタック」されています(例:
[ビットコイン](https://github.com/bitcoin/bitcoin))は全体を持っています
設計.言い換えれば、各ブロックチェーンスタックはプロセスです
分散型元帳に関するすべての問題.これにはP2Pが含まれます
接続性、トランザクションの「メモリプール」ブロードキャスト、コンセンサス
最近のブロック、口座残高、チューリング完全契約、
ユーザーレベルの権限など.

コンピュータでモノリシックアーキテクチャを使用することは一般的に悪い習慣です
理科.これにより、コードのコンポーネントを再利用することが困難になり、
そうしようとすると、フォークのメンテナンス手順が複雑になります
コードライブラリ.これは、コードベースがモジュール式でない場合に特に当てはまります
デザインで「スパゲッティコード」トラブルに悩まされています.

モノリシックデザインのもう1つの問題は、それがあなたを制限することです
ブロックチェーンスタックの言語(およびその逆).もしも
イーサリアムは、チューリングの完全なバイトコード仮想マシンをサポートしています.
そのバイトコードにコンパイルされる言語に制限します;今日、それらは
それは蛇と堅実です.

対照的に、私たちのアプローチは、コンセンサスエンジンとP2Pを分離することです
特定のアプリケーション状態の詳細レベルから
ブロックチェーンアプリケーション.詳細を抽象化することでこれを行います
ソケットとして実装されるインターフェースへの適用
プロトコル.

つまり、アプリケーションブロックリンクインターフェイス(ABCI)というインターフェイスがあります.
そして、その主な実装であるTendermint Socket Protocol(TSP、または
ティースプーン).

### ABCIはじめに

[テンダーミントコア](https://github.com/tendermint/tendermint)(
「コンセンサスエンジン」)は、ソケットを介してアプリケーションと通信します
ABCI契約を満たします.

たとえば、有名な暗号通貨について話しましょう、
ビットコイン.ビットコインは暗号通貨のブロックチェーンであり、各ノードは
完全に監査された未使用のトランザクション出力(UTXO)データベースを維持します.もしも
誰かがABCIとテンダーミントの上にビットコインのようなシステムを作りたいと思っています
コアが責任を負います

-ノード間でブロックとトランザクションを共有する
-標準化された/不変のトランザクションシーケンスを確立します
  (ブロックチェーン)

アプリが責任を負います

-UTXOデータベースを維持します
-トランザクションの暗号署名を確認します
-取引コストが存在しない取引を防止します
-クライアントがUTXOデータベースにクエリを実行できるようにします.

テンダーミントは非常に提供することができます
アプリケーションとコンセンサスの間のシンプルなAPI(つまり、ABCI)
処理する.

ABCIは、次の3つの主要なメッセージタイプで構成されています.
アプリケーションのコア.アプリケーションはそれに応じて応答します
応答メッセージ.

メッセージはここで指定されます:[ABCIメッセージ
タイプ](https://github.com/tendermint/tendermint/blob/master/abci/README.md#message-types).

** DeliverTx **メッセージはアプリケーションの主力製品です.各
ブロックチェーン内のトランザクションは、このメッセージとともに渡されます.この
アプリケーションは、受け取ったすべてのトランザクションを確認する必要があります
** DeliverTx **現在のステータス、アプリケーションプロトコルについては、
そして、トランザクションの暗号化された証明書.実績のある
次に、トランザクションはアプリケーションの状態を更新する必要があります.
値をKey-Valueストアに追加するか、UTXOデータベースを更新して
実例.

** CheckTx **メッセージは** DeliverTx **に似ていますが、使用されるのは
トランザクションを確認します. TendermintCoreのメモリプールが最初にチェックされます
** CheckTx **トランザクションの有効性、およびリレーのみが有効です
その仲間に対処します.たとえば、アプリケーションがチェックする場合があります
トランザクションのシーケンス番号をインクリメントしてエラーを返します
** CheckTx **シリアル番号が古い場合.または彼らは使用するかもしれません
コンピテンシーベースのシステム、機能を更新する必要がある
すべてのトランザクション.

**コミット**メッセージは、
現在のアプリケーションの状態は、次のブロックヘッダーに配置されます.
これにはいくつかの便利な機能があります.ステータスの不整合を更新します
ブロックチェーンフォークとして表示され、クラス全体をキャプチャします
プログラミングエラー.これにより、セキュリティ開発も簡素化されます
マークルハッシュプルーフは検査によって検証できるため、軽量クライアント
ブロックハッシュの場合、ブロックハッシュはクォーラムによって署名されます.

アプリケーションは、複数のABCIソケット接続を持つことができます.
Tendermint Coreは、アプリケーション用に3つのABCI接続を作成します.1つは
メモリプールでブロードキャストするときにトランザクションを検証するために使用されます.
ブロック提案を実行するためのコンセンサスエンジン、および
アプリケーションのステータスを照会します.

明らかに、アプリケーション設計者は非常に注意する必要があります
メッセージハンドラーを設計して、何でもできるブロックチェーンを作成します
便利ですが、このアーキテクチャは出発点を提供します.チャート
ABCIを介したメッセージフローについて以下に説明します.

！[abci](../../imgs/abci.png)

##決定論に関する注記

ブロックチェーントランザクション処理のロジックは決定論的でなければなりません.
アプリケーションロジックが決定論的でない場合、コンセンサスは決定論的ではありません
TendermintCoreのレプリカノード間で到達します.

イーサリアムのSolidityは、ブロックチェーンに最適な言語です
アプリケーション、他の理由の中でも、それは完全であるため
決定論的プログラミング言語.しかし、それはまたできます
既存の人気のある言語を使用して、次のような決定論的なアプリケーションを作成します
Java、C ++、PythonまたはGo.ゲームプログラマーとブロックチェーン開発者は
決定論的手順の作成を回避することですでによく知られています
次のような不確実性の原因:

-乱数ジェネレーター(決定論的シードなし)
-スレッドの競合状態(またはスレッドを完全に回避する)
-システム時計
-初期化されていないメモリ(Cなどの安全でないプログラミング言語)
  またはC ++)
-[浮動小数点
  算術](http://gafferongames.com/networking-for-game-programmers/floating-point-determinism/)
-ランダムな言語機能(例:Goでのマップの反復)

プログラマーは注意することで不確実性を回避できますが、それは
言語ごとに特別なリンターまたは静的アナライザーを作成できます
確実性を確認してください.将来的には、パートナーと協力する可能性があります.
そのようなツールを作成します.

##コンセンサスの概要

Tendermintは、理解しやすい、主に非同期のBFTコンセンサスです.
プロトコル.プロトコルは、次のような単純なステートマシンに従います.
この:

！[コンセンサスロジック](../../imgs/consensus_logic.png)

契約の参加者は**バリデーター**と呼ばれ、交代で参加します
トランザクションブロックを提案し、それらに投票します.ブロックは
**高さ**ごとに1ブロックずつ、チェーンで送信します.ブロックはかもしれません
提出に失敗しました.この場合、契約は次の契約に移ります
**ラウンド**、そして新しいバリデーターはその高さのブロックを提案できます.
ブロックを正常に送信するには、2段階の投票が必要です.
それらを**事前投票**および**事前コミット**と呼びます.ブロックがコミットされたとき
バリデーターの2/3以上が同じブロックで事前コミットします
円形.

オーセンティケーターが
ポルカダンスのようなことをしてください. 3分の2以上の場合
検証者は、**ポルカ**と呼ばれる同じブロックに事前投票します.毎日
事前提出は、同じラウンドでポルカによって証明されなければなりません.

さまざまな理由により、バリデーターはブロックを送信できない場合があります.これは
現在の提案者がオフラインであるか、ネットワークが遅い可能性があります.肌の若返り
バリデーターをスキップする必要があることを彼らが判断できるようにします.バリデーター
から少し待つ
投票する前の提案者は次のラウンドに入ります.この依存関係
タイムアウトは、Tendermintを弱い同期プロトコルにするものであり、
非同期より.ただし、残りの契約は
非同期、バリデーターは、より多くの意見を聞いた後にのみ進歩を遂げることができます
バリデーターセットの3分の2以上.簡略化された要素
テンダーミントは、同じメカニズムを使用してブロックを送信することです
次のラウンドにスキップします.

バリデーターの3分の1未満がビザンチウム、テンダーミントであると仮定します
セキュリティが侵害されないことを保証します.つまり、検証者は
同じ高さで競合するブロックを送信しないでください.これを行うことができる必要があります
いくつかの**ロック**ルールが導入されました.これらのルールは、どのパスを調整できるかを調整できます
次はフローチャートです.バリデーターがブロックを事前にコミットすると、
そのブロックにロックされています.それで、

1.ロックされているブロックに投票する必要があります
2.新しいブロックがある場合にのみ、ロックを解除して事前にコミットできます
    次のラウンドでそのブロックのポルカをプレイ

##エクイティ

多くのシステムでは、すべてのバリデーターが同じ「重み」を持っているわけではありません
コンセンサス合意.したがって、私たちは
バリデーターの3分の2ですが、全体のこれらの割合で
議決権は個人間で均等に分配されない場合があります
バリデーター.

Tendermintは任意のアプリケーションをコピーできるため、次のことができます.
通貨を定義し、その通貨で議決権を指定します.
議決権が自国通貨建ての場合、制度は
通常、公平性の証明と呼ばれます.バリデーターはロジックを介して強制することができます
アプリケーションでは、保有する通貨を有価証券に「バインド」します
不正行為が見つかった場合に破棄される可能性のある預金
コンセンサス合意.これにより、ネットワークのセキュリティに経済的要因が追加されます
仮定に違反するコストの定量化を可能にする契約
投票権の3分の1未満がビザンチンです.

[コスモスネットワーク](https://cosmos.network)はこれを使用します
一連の暗号通貨全体に実装されたプルーフオブステークメカニズム
ABCIアプリケーションとして.

下の写真は、一言で言えばテンダーミント(技術)です.

！[tx-flow](../../imgs/tm-transaction-flow.png)
