# ADR 004:履歴バリデーター

## 環境

これで、現在のバリデーターセットを照会できますが、履歴はありません。
長期間オフラインの場合、過去のバリデーターを再構築することはできません。これはライトクライアントが必要とするものであり、APIを拡張する必要があることに同意します。

## 決定

ブロックごとに、最新のバリデーターのセットを含む新しい構造を保存します。
または、バリデーターセットによって変更された最後のブロックの高さ。これはそうではないことに注意してください
バリデーターセットに戻るブロックの高さは自動的に変更されますが、次のブロックは
IE。最初のブロックが有効になります。

ストレージバリデーターは `state`パッケージによって処理されます。

将来のある時点で、バリデーターの場合、より効率的なストレージの使用を検討する可能性があります
頻繁に更新します。たとえば、コレクション全体ではなく、違いのみが保存されます。

別の方法では、バリデーターセットまたはその違いをMerkelIAVLツリーに保存することをお勧めします。
ベリファイアセットが変更されていないことをより安価に証明できますが、より複雑になります。
そして、それは効率が悪いかもしれません。

## ステータス

実装

## 結果

### ポジティブ

-古いバリデーターセットをクエリできます。証拠があります。

### ネガティブ

-ブロックごとにディスクに追加の構造を書き込みます。

### ニュートラル
